(function(){"use strict";var e={6295:function(e,t,i){var s=i(5130),a=i(6768);const n={id:"screen"},o=["disabled"];function l(e,t,i,s,l,r){const c=(0,a.g2)("VitalSignCamera"),d=(0,a.g2)("bounding-box"),u=(0,a.g2)("face-mesh-view"),v=(0,a.g2)("status"),h=(0,a.g2)("condition-checklist"),f=(0,a.g2)("health-result");return(0,a.uX)(),(0,a.CE)("div",n,[(0,a.bF)(c,{ref:"vscam",device:e.devices[e.cameraIndex].id,class:"camera",isActive:e.isActive,userInfo:e.userInfo,config:e.config,onOnVideoFrameProcessed:e.onVideoFrameProcessed},null,8,["device","isActive","userInfo","config","onOnVideoFrameProcessed"]),void 0!==e.facebox&&e.isActive?((0,a.uX)(),(0,a.Wv)(d,{key:0,facebox:e.facebox,cameraIndex:e.cameraIndex},null,8,["facebox","cameraIndex"])):(0,a.Q3)("",!0),void 0!==e.facebox&&e.isActive?((0,a.uX)(),(0,a.Wv)(u,{key:1,landmarks:e.landmarks,cameraIndex:e.cameraIndex},null,8,["landmarks","cameraIndex"])):(0,a.Q3)("",!0),e.healthResult&&3==e.healthResult.stage?((0,a.uX)(),(0,a.CE)("button",{key:2,class:"startButton startText",onClick:t[0]||(t[0]=(...t)=>e.startScanning&&e.startScanning(...t)),disabled:!e.disabled}," Start ",8,o)):(0,a.Q3)("",!0),e.healthResult&&3!==e.healthResult.stage?((0,a.uX)(),(0,a.Wv)(v,{key:3,healtResult:e.healthResult},null,8,["healtResult"])):(0,a.Q3)("",!0),void 0===e.conditions||3!=e.healthResult?.stage||e.showResult?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(h,{key:4,conditions:e.conditions},null,8,["conditions"])),e.healthResult?.health?((0,a.uX)(),(0,a.Wv)(f,{key:5,healthResult:e.healthResult?.health,showResult:e.showResult,onHideResult:e.hideResult},null,8,["healthResult","showResult","onHideResult"])):(0,a.Q3)("",!0),e.devices.length>1?((0,a.uX)(),(0,a.CE)("button",{key:6,class:"cameraSwitchButton",onClick:t[1]||(t[1]=(...t)=>e.switchCamera&&e.switchCamera(...t))},"Switch Camera")):(0,a.Q3)("",!0)])}var r=i(9887),c=i(4232);const d={class:"face-mesh-container",ref:"container"};function u(e,t,i,s,n,o){return(0,a.uX)(),(0,a.CE)("div",d,[(0,a.Lk)("canvas",{ref:"canvas",style:(0,c.Tr)(e.style)},null,4)],512)}var v=i(8897),h=i(4409),f=i(8810);const m=(0,a.pM)({name:"face-mesh-view",props:{landmarks:Object,cameraIndex:Number},setup(){return{style:{}}},data(){return{transform:"scaleX(-1)"}},mounted(){this.changeTransform},watch:{landmarks(){this.updateStyle(),this.redraw()},aspectRatio(){this.updateStyle(),this.redraw()},cameraIndex(){this.changeTransform()}},methods:{changeTransform(){setTimeout((()=>{const e=f.A.browserDetails.browser;var t;t="firefox"==e?document.getElementsByTagName("video")[0].srcObject?.getVideoTracks()[0].getSettings().facingMode:document.getElementsByTagName("video")[0].srcObject?.getVideoTracks()[0].getCapabilities().facingMode,t&&"environment"===t[0]?this.transform="none":this.transform="scaleX(-1)"}),1e3)},updateStyle(){const e=document.getElementsByTagName("video")[0].srcObject.getVideoTracks()[0];var t=0;if(e){const i=e.getSettings().height,s=e.getSettings().width;t=s&&i?s/i:0}let i={width:void 0,height:void 0,left:"0%",top:"0%",aspectRatio:t};const s=this.$parent?.$refs.vscam.$refs.video;let a=s.clientWidth/s.clientHeight;if(a<t){const e=(a-t)/a/2*100;i.left=`${e}%`,i.width=2*-e+100+"%"}else i.top=(1/a-1/t)*a/2*100+"%",i.width="100%";this.style=i},redraw(){let e=this.$refs.canvas;e.width=640,e.height=480;const t=e.getContext("2d");null!==t&&(t.save(),t.clearRect(0,0,e.width,e.height),(0,v.drawConnectors)(t,this.landmarks,h.FACEMESH_TESSELATION,{color:"lightgreen",lineWidth:.2}),t.restore())}}}),g=()=>{(0,s.$9)((e=>({b8fc0df8:e.transform})))},p=m.setup;m.setup=p?(e,t)=>(g(),p(e,t)):g;var b=m,k=i(1241);const R=(0,k.A)(b,[["render",u],["__scopeId","data-v-ef27425c"]]);var y=R;const S={class:"container"},x={class:"countdown"},w={class:"text"};function C(e,t,i,s,n,o){return(0,a.uX)(),(0,a.CE)("div",S,[(0,a.Lk)("p",x,(0,c.v_)(e.number),1),(0,a.Lk)("p",w,(0,c.v_)(e.text),1)])}var I=(0,a.pM)({setup(){},props:{healtResult:{type:Object}},computed:{number(){return this.healtResult?this.healtResult.remainingTime.toFixed(0):"-1"},text(){let e="";switch(this.healtResult?.stage){case r.Bi.CollectingData:e="Scanning...";break;case r.Bi.AnalyzingData:e="Analyzing...";break;case r.Bi.WaitingData:e="Loading...";break}return e}}});const _=(0,k.A)(I,[["render",C],["__scopeId","data-v-289c88f1"]]);var O=_;const T=e=>((0,a.Qi)("data-v-3fd465d6"),e=e(),(0,a.jt)(),e),A={key:0,class:"container"},W=T((()=>(0,a.Lk)("div",{class:"section"},"Scanning Conditions",-1))),X={class:"condition"},F={class:"condition"},E={class:"condition"},L={class:"condition"},Q={class:"condition"},P={class:"condition"};function j(e,t,i,s,n,o){const l=(0,a.g2)("condition-icon");return i.conditions?((0,a.uX)(),(0,a.CE)("div",A,[W,(0,a.Lk)("p",X,[(0,a.bF)(l,{class:"icon",fulfilled:i.conditions.lighting},null,8,["fulfilled"]),(0,a.eW)(" Lighting ")]),(0,a.Lk)("p",F,[(0,a.bF)(l,{class:"icon",fulfilled:i.conditions.distance},null,8,["fulfilled"]),(0,a.eW)(" Distance ")]),(0,a.Lk)("p",E,[(0,a.bF)(l,{class:"icon",fulfilled:i.conditions.centered},null,8,["fulfilled"]),(0,a.eW)(" Centered ")]),(0,a.Lk)("p",L,[(0,a.bF)(l,{class:"icon",fulfilled:i.conditions.movement},null,8,["fulfilled"]),(0,a.eW)(" Movement ")]),(0,a.Lk)("p",Q,[(0,a.bF)(l,{class:"icon",fulfilled:i.conditions.frameRate},null,8,["fulfilled"]),(0,a.eW)(" Frame Rate ")]),(0,a.Lk)("p",P,[(0,a.bF)(l,{class:"icon",fulfilled:i.conditions.serverReady},null,8,["fulfilled"]),(0,a.eW)(" Server Ready ")])])):(0,a.Q3)("",!0)}var B=i.p+"img/checkmark.faaf8c01.svg",H=i.p+"img/crossmark.93784a98.svg";const D={key:0,src:B},M={key:1,src:H};function V(e,t,i,s,n,o){return i.fulfilled?((0,a.uX)(),(0,a.CE)("img",D)):((0,a.uX)(),(0,a.CE)("img",M))}var N={name:"condtion-icon",props:{fulfilled:{type:Boolean,default:!1}},setup(){}};const $=(0,k.A)(N,[["render",V],["__scopeId","data-v-3dcaf130"]]);var z=$,Y={setup(){},props:{conditions:Object},components:{ConditionIcon:z}};const U=(0,k.A)(Y,[["render",j],["__scopeId","data-v-3fd465d6"]]);var G=U;const K=e=>((0,a.Qi)("data-v-576bbfbb"),e=e(),(0,a.jt)(),e),q={key:0,class:"container"},J=K((()=>(0,a.Lk)("div",{class:"section"},"Vital Signs",-1))),Z=K((()=>(0,a.Lk)("div",{class:"section"},"Holistic Analysis",-1))),ee={key:12,class:"section"},te=K((()=>(0,a.Lk)("div",{class:"section"},"Cardiovascular Risk",-1))),ie={key:13,class:"section"},se=K((()=>(0,a.Lk)("div",{class:"sec"},"Covid",-1))),ae={key:14,class:"section"},ne=K((()=>(0,a.Lk)("div",{class:"sec"},"Scan Parameters",-1)));function oe(e,t,i,s,n,o){const l=(0,a.g2)("vital-signs");return e.showResult?((0,a.uX)(),(0,a.CE)("div",q,[(0,a.Lk)("div",{class:"close",onClick:t[0]||(t[0]=(...t)=>e.hideResult&&e.hideResult(...t))},"[x]"),J,(0,a.bF)(l,{name:"Heart Rate",value:e.vs?.heartRate},null,8,["value"]),(0,a.bF)(l,{name:"SPO2",value:e.vs?.spo2},null,8,["value"]),(0,a.bF)(l,{name:"IBI",value:e.vs?.ibi},null,8,["value"]),e.vs?.stress?((0,a.uX)(),(0,a.Wv)(l,{key:0,name:"Stress",value:e.vs.stress},null,8,["value"])):(0,a.Q3)("",!0),e.vs?.respiratoryRate?((0,a.uX)(),(0,a.Wv)(l,{key:1,name:"Respiratory Rate",value:e.vs.respiratoryRate},null,8,["value"])):(0,a.Q3)("",!0),e.vs?.hrvRmssd?((0,a.uX)(),(0,a.Wv)(l,{key:2,name:"HRV RMSSD",value:e.vs.hrvRmssd},null,8,["value"])):(0,a.Q3)("",!0),e.vs?.hrvSdnn?((0,a.uX)(),(0,a.Wv)(l,{key:3,name:"HRV SDNN",value:e.vs.hrvSdnn},null,8,["value"])):(0,a.Q3)("",!0),e.vs?.temperature?((0,a.uX)(),(0,a.Wv)(l,{key:4,name:"Temperature",value:e.vs.temperature},null,8,["value"])):(0,a.Q3)("",!0),e.vs?.bloodPressure?((0,a.uX)(),(0,a.Wv)(l,{key:5,name:"BloodPressure",value:e.vs.bloodPressure},null,8,["value"])):(0,a.Q3)("",!0),e.vs?.bloodPressureSystolic?((0,a.uX)(),(0,a.Wv)(l,{key:6,name:"Blood Pressure Systolic",value:e.vs.bloodPressureSystolic},null,8,["value"])):(0,a.Q3)("",!0),e.vs?.bloodPressureDiastolic?((0,a.uX)(),(0,a.Wv)(l,{key:7,name:"Blood Pressure Diastolic",value:e.vs.bloodPressureDiastolic},null,8,["value"])):(0,a.Q3)("",!0),e.vs?.facialSkinAge?((0,a.uX)(),(0,a.Wv)(l,{key:8,name:"Facial Skin Age",value:e.vs.facialSkinAge},null,8,["value"])):(0,a.Q3)("",!0),e.vs?.bloodAlcohol?((0,a.uX)(),(0,a.Wv)(l,{key:9,name:"Blood Alcohol",value:e.vs.bloodAlcohol},null,8,["value"])):(0,a.Q3)("",!0),e.vs?.bloodSugar?((0,a.uX)(),(0,a.Wv)(l,{key:10,name:"Blood Sugar",value:e.vs.bloodSugar},null,8,["value"])):(0,a.Q3)("",!0),Z,(0,a.bF)(l,{name:"BMI",value:e.holistic?.bmi},null,8,["value"]),e.holistic?.generalWellness?((0,a.uX)(),(0,a.Wv)(l,{key:11,name:"General Wellness",value:e.holistic.generalWellness},null,8,["value"])):(0,a.Q3)("",!0),e.cardio?((0,a.uX)(),(0,a.CE)("div",ee,[te,(0,a.bF)(l,{name:"General",value:e.cardio.generalRisk},null,8,["value"]),(0,a.bF)(l,{name:"Congestive Heart Failure",value:e.cardio.congestiveHeartFailure},null,8,["value"]),(0,a.bF)(l,{name:"Coronary Heart Disease",value:e.cardio.coronaryHeartDisease},null,8,["value"]),(0,a.bF)(l,{name:"Intermittent Claudification",value:e.cardio.intermittentClaudication},null,8,["value"]),(0,a.bF)(l,{name:"Stroke",value:e.cardio.stroke},null,8,["value"])])):(0,a.Q3)("",!0),e.covid?((0,a.uX)(),(0,a.CE)("div",ie,[se,(0,a.bF)(l,{name:"Risk",value:e.covid.covidRisk},null,8,["value"])])):(0,a.Q3)("",!0),e.healthResult?.scanParameters?((0,a.uX)(),(0,a.CE)("div",ae,[ne,(0,a.bF)(l,{name:"Signal Quality",value:e.healthResult.scanParameters.signalQuality},null,8,["value"])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)}const le={class:"vitalSign"},re={class:"vitalSignName"},ce={class:"vitalSignValueView"},de={class:"vitalSignValue"};function ue(e,t,i,s,n,o){return(0,a.uX)(),(0,a.CE)("div",le,[(0,a.Lk)("div",re,(0,c.v_)(i.name),1),(0,a.Lk)("div",ce,[(0,a.Lk)("div",de,(0,c.v_)(i.value),1)])])}var ve={setup(){},props:{name:String,value:[Number,String]}};const he=(0,k.A)(ve,[["render",ue],["__scopeId","data-v-a3fb7d3e"]]);var fe=he,me=(0,a.pM)({setup(){},emits:["hideResult"],props:{healthResult:Object,showResult:Boolean},components:{VitalSigns:fe},computed:{vs(){return this.healthResult?.vitalSigns},holistic(){return this.healthResult?.holisticHealth},cardio(){return this.healthResult?.risks?.cardiovascularRisks},covid(){return this.healthResult?.risks?.covidRisk}},methods:{hideResult(){this.$emit("hideResult")}}});const ge=(0,k.A)(me,[["render",oe],["__scopeId","data-v-576bbfbb"]]);var pe=ge;const be={class:"container",ref:"container"};function ke(e,t,i,s,n,o){return(0,a.uX)(),(0,a.CE)("div",be,[(0,a.Lk)("div",{style:(0,c.Tr)(e.containerStyle)},[(0,a.Lk)("div",{style:(0,c.Tr)(e.bboxStyle)},null,4)],4)],512)}var Re=(0,a.pM)({props:{facebox:Object,cameraIndex:Number},setup(){},mounted(){this.changeTransform()},data(){return{width:0,height:0,left:0,top:0,videoWidth:0,videoHeight:0,videoOffsetTop:0,videoOffsetLeft:0,additionalWidth:0,additionalHeight:0,containerAspectRatio:0,aspectRatio:0,transform:"scaleX(-1)"}},watch:{facebox(){const e=document.getElementsByTagName("video")[0].srcObject.getVideoTracks()[0];var t,i;if(e&&(i=e.getSettings().height,t=e.getSettings().width,this.aspectRatio=t&&i?t/i:0),!this.facebox||!this.$parent)return;const s=this.$parent.$refs.vscam.$refs.video;this.containerAspectRatio=s.clientWidth/s.clientHeight,this.containerAspectRatio<this.aspectRatio?(this.videoOffsetLeft=(this.containerAspectRatio-this.aspectRatio)/this.containerAspectRatio/2*100,this.videoWidth=100+2*Math.abs(this.videoOffsetLeft),this.videoOffsetTop=0,this.videoHeight=100):(this.videoOffsetTop=(1/this.containerAspectRatio-1/this.aspectRatio)*this.containerAspectRatio/2*100,this.videoHeight=100+2*Math.abs(this.videoOffsetTop),this.videoOffsetLeft=0,this.videoWidth=100),i&&t&&(this.width=100*this.facebox.width,this.height=100*this.facebox.height,this.left=100*this.facebox.xCenter-this.width/2,this.top=100*this.facebox.yCenter-this.height/2)},cameraIndex(){this.changeTransform()}},methods:{changeTransform(){setTimeout((()=>{const e=f.A.browserDetails.browser;var t;t="firefox"==e?document.getElementsByTagName("video")[0].srcObject?.getVideoTracks()[0].getSettings().facingMode:document.getElementsByTagName("video")[0].srcObject?.getVideoTracks()[0].getCapabilities().facingMode,t&&"environment"===t[0]?this.transform="none":this.transform="scaleX(-1)"}),1e3)}},computed:{containerStyle(){const e={position:"absolute",left:this.videoOffsetLeft+"%",top:this.videoOffsetTop+"%",width:this.videoWidth+"%",height:this.videoHeight+"%",aspectRatio:this.aspectRatio,transform:this.transform};return e},bboxStyle(){const e={position:"absolute",borderStyle:"solid",borderWidth:"8px",borderColor:"#198754",left:this.left+"%",top:this.top+"%",width:this.width+"%",height:this.height+"%"};return e}}});const ye=(0,k.A)(Re,[["render",ke],["__scopeId","data-v-697fb170"]]);var Se=ye,xe=(0,a.pM)({setup(){},data(){return{isActive:!1,healthResult:void 0,frameSize:void 0,facebox:void 0,conditions:void 0,userInfo:{age:30,gender:r.YT.Male,userId:"__YOUR_USER_ID__"},showResult:!1,disabled:!1,config:{serverId:r.fu.AwsProdEnterprise,apiKey:"__YOUR_API_KEY__"},landmarks:void 0,cameraIndex:0,devices:[{text:"",id:"",deviceIndex:0}],checkDevice:void 0}},components:{VitalSignCamera:r.xH,Status:O,ConditionChecklist:G,HealthResult:pe,BoundingBox:Se,FaceMeshView:y},methods:{startScanning(){const e=this.$refs.vscam;e.startScanning(),this.showResult=!0},onVideoFrameProcessed(e){const{videoFrameInfo:t,facebox:i,healthResult:s,scanConditions:a,landmarks:n}=e;this.conditions=a,this.healthResult=s,this.facebox=i,this.frameSize=t,this.landmarks=n,this.disabled=!!this.conditions&&Object.values(this.conditions).every((e=>e))},hideResult(){this.showResult=!1},switchCamera(){this.cameraIndex=(this.cameraIndex+1)%this.devices.length}},async mounted(){this.isActive=!0,this.checkDevice=setInterval((async()=>{let e=await navigator.mediaDevices.enumerateDevices();e=e.filter((e=>"videoinput"===e.kind)),this.devices=e.map(((e,t)=>({text:e.label,id:e.deviceId,deviceIndex:t}))),this.cameraIndex=0}),1e3)},watch:{devices(){""!==this.devices[0].text&&(clearInterval(this.checkDevice),this.checkDevice=void 0)}}});const we=(0,k.A)(xe,[["render",l],["__scopeId","data-v-6cbea567"]]);var Ce=we;(0,s.Ef)(Ce).mount("#app")}},t={};function i(s){var a=t[s];if(void 0!==a)return a.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,i),n.exports}i.m=e,function(){var e=[];i.O=function(t,s,a,n){if(!s){var o=1/0;for(d=0;d<e.length;d++){s=e[d][0],a=e[d][1],n=e[d][2];for(var l=!0,r=0;r<s.length;r++)(!1&n||o>=n)&&Object.keys(i.O).every((function(e){return i.O[e](s[r])}))?s.splice(r--,1):(l=!1,n<o&&(o=n));if(l){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[s,a,n]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.p="/"}(),function(){var e={524:0};i.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,n,o=s[0],l=s[1],r=s[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(a in l)i.o(l,a)&&(i.m[a]=l[a]);if(r)var d=r(i)}for(t&&t(s);c<o.length;c++)n=o[c],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(d)},s=self["webpackChunkvue_vital_sign_app"]=self["webpackChunkvue_vital_sign_app"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=i.O(void 0,[504],(function(){return i(6295)}));s=i.O(s)})();
//# sourceMappingURL=app.575ad98f.js.map
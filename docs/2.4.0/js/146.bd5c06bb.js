"use strict";(self["webpackChunkvue_vital_sign_app"]=self["webpackChunkvue_vital_sign_app"]||[]).push([[146],{5146:function(e,a,t){t.d(a,{MPVisionFaceMeshDetector:function(){return l}});var s=t(7580),n=t(485),o=Object.defineProperty,r=(e,a,t)=>a in e?o(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,i=(e,a,t)=>(r(e,"symbol"!=typeof a?a+"":a,t),t);const{FaceLandmarker:c,FilesetResolver:d}=n;class l{constructor(){i(this,"faceLandmarker"),i(this,"runningMode","IMAGE"),i(this,"modelLocation",s.F.CDN)}getModelAssetPath(e){switch(e){case s.F.CDN:return"https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task";case s.F.SelfHosted:const{protocol:e,host:a}=window.location;return`${e}//${a}/models/mpvision/face_landmarker/face_landmarker/float16/1/face_landmarker.task`}}getWasmPath(e){switch(e){case s.F.CDN:return"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.3/wasm";case s.F.SelfHosted:const{protocol:e,host:a}=window.location;return`${e}//${a}/models/mpvision/tasks-vision@0.10.9/wasm`}}async createFaceLandmarker(e){const a=this.getWasmPath(e||s.F.SelfHosted),t=await d.forVisionTasks(a),n=this.getModelAssetPath(e||s.F.SelfHosted);this.faceLandmarker=await c.createFromOptions(t,{baseOptions:{modelAssetPath:n,delegate:"GPU"},outputFaceBlendshapes:!0,runningMode:this.runningMode,numFaces:1})}async loadModels(){await this.createFaceLandmarker(this.modelLocation);const e=await(0,s.l)();await this.detect({image:e})}async detect(e){const a=(0,s.t)(e);if(void 0===this.faceLandmarker)return{faceBox:void 0,landmarks:[],videoFrame:a};const t=this.faceLandmarker.detect(a);if(0===t.faceLandmarks.length)return{faceBox:void 0,landmarks:[],videoFrame:a};const n=t.faceLandmarks[0];return{faceBox:(0,s.a)(n),landmarks:n,videoFrame:a}}}}}]);
//# sourceMappingURL=146.bd5c06bb.js.map
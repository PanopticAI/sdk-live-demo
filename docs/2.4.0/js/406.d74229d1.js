"use strict";(self["webpackChunkvue_vital_sign_app"]=self["webpackChunkvue_vital_sign_app"]||[]).push([[406],{1406:function(e,t,o){o.d(t,{MPVisionFaceDetector:function(){return c}});var i=o(485),a=o(7580),n=Object.defineProperty,s=(e,t,o)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,r=(e,t,o)=>(s(e,"symbol"!=typeof t?t+"":t,o),o);class c{constructor(){r(this,"faceDetector"),r(this,"runningMode","IMAGE"),r(this,"modelLocation","CDN"),console.log("[MPFaceDetector] Created.")}get modelAssetPath(){if("CDN"===this.modelLocation)return"https://storage.googleapis.com/mediapipe-models/face_detector/blaze_face_short_range/float16/1/blaze_face_short_range.tflite";{const{protocol:e,host:t}=window.location;return`${e}//${t}/models/mpvision/face_detector/blaze_face_short_range/float16/1/blaze_face_short_range.tflite`}}async initializefaceDetector(){const e=await i.FilesetResolver.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.0/wasm");this.faceDetector=await i._l.createFromOptions(e,{baseOptions:{modelAssetPath:this.modelAssetPath,delegate:"GPU"},runningMode:this.runningMode})}async loadModels(){await this.initializefaceDetector();const e=await(0,a.l)();await this.detect({image:e})}async detect(e){const t=(0,a.t)(e);if(void 0===this.faceDetector)return{faceBox:void 0,landmarks:[],videoFrame:t};const o=this.faceDetector.detect(t).detections;if(0===o.length)return{faceBox:void 0,landmarks:[],videoFrame:t};const i=o[0];return void 0===i.boundingBox?{faceBox:void 0,landmarks:[],videoFrame:t}:{faceBox:{xCenter:(i.boundingBox.originX+i.boundingBox.width/2)/t.width,yCenter:(i.boundingBox.originY+i.boundingBox.height/2)/t.height,width:i.boundingBox.width/t.width,height:i.boundingBox.height/t.height},landmarks:[],videoFrame:t}}}}}]);
//# sourceMappingURL=406.d74229d1.js.map
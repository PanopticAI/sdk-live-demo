(function(){"use strict";var e={653:function(e,t,s){var a=s(9242),n=s(3396);const i={id:"screen"},l=["disabled"];function o(e,t,s,a,o,r){const c=(0,n.up)("VitalSignCamera"),u=(0,n.up)("face-mesh-view"),d=(0,n.up)("status"),v=(0,n.up)("condition-checklist"),h=(0,n.up)("health-result");return(0,n.wg)(),(0,n.iD)("div",i,[(0,n.Wm)(c,{ref:"vscam",device:e.devices[e.cameraIndex].id,class:"camera",isActive:e.isActive,userInfo:e.userInfo,config:e.config,faceDetectorType:e.faceDetectorType,onOnVideoFrameProcessed:e.onVideoFrameProcessed},null,8,["device","isActive","userInfo","config","faceDetectorType","onOnVideoFrameProcessed"]),void 0!==e.facebox&&e.isActive?((0,n.wg)(),(0,n.j4)(u,{key:0,landmarks:e.landmarks,cameraIndex:e.cameraIndex},null,8,["landmarks","cameraIndex"])):(0,n.kq)("",!0),e.healthResult&&3==e.healthResult.stage?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"startButton startText",onClick:t[0]||(t[0]=(...t)=>e.startScanning&&e.startScanning(...t)),disabled:!e.disabled}," Start ",8,l)):(0,n.kq)("",!0),e.healthResult&&3!==e.healthResult.stage?((0,n.wg)(),(0,n.j4)(d,{key:2,healtResult:e.healthResult},null,8,["healtResult"])):(0,n.kq)("",!0),void 0===e.conditions||3!=e.healthResult?.stage||e.showResult?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(v,{key:3,conditions:e.conditions},null,8,["conditions"])),e.devices.length>1?((0,n.wg)(),(0,n.iD)("button",{key:4,class:"cameraSwitchButton",onClick:t[1]||(t[1]=(...t)=>e.switchCamera&&e.switchCamera(...t))},"Switch Camera")):(0,n.kq)("",!0),e.healthResult?.health?((0,n.wg)(),(0,n.j4)(h,{key:5,healthResult:e.healthResult?.health,showResult:e.showResult,onHideResult:e.hideResult},null,8,["healthResult","showResult","onHideResult"])):(0,n.kq)("",!0)])}var r=s(5178),c=s(7139);const u={class:"face-mesh-container",ref:"container"};function d(e,t,s,a,i,l){return(0,n.wg)(),(0,n.iD)("div",u,[(0,n._)("canvas",{ref:"canvas",style:(0,c.j5)(e.style)},null,4)],512)}var v=s(5726),h=s(9880),m=s(7309);const f=(0,n.aZ)({name:"face-mesh-view",props:{landmarks:Object,cameraIndex:Number},setup(){return{style:{}}},data(){return{transform:"scaleX(-1)"}},mounted(){this.changeTransform},watch:{landmarks(){this.updateStyle(),this.redraw()},aspectRatio(){this.updateStyle(),this.redraw()},cameraIndex(){this.changeTransform()}},methods:{changeTransform(){setTimeout((()=>{const e=m.Z.browserDetails.browser;var t;t="firefox"==e?document.getElementsByTagName("video")[0].srcObject?.getVideoTracks()[0].getSettings().facingMode:document.getElementsByTagName("video")[0].srcObject?.getVideoTracks()[0].getCapabilities().facingMode,t&&"environment"===t[0]?this.transform="none":this.transform="scaleX(-1)"}),1e3)},updateStyle(){const e=document.getElementsByTagName("video")[0].srcObject.getVideoTracks()[0];var t=0;if(e){const s=e.getSettings().height,a=e.getSettings().width;t=a&&s?a/s:0}let s={width:void 0,height:void 0,left:"0%",top:"0%",aspectRatio:t};const a=this.$parent?.$refs.vscam.$refs.video;let n=a.clientWidth/a.clientHeight;if(n<t){const e=(n-t)/n/2*100;s.left=`${e}%`,s.width=2*-e+100+"%"}else s.top=(1/n-1/t)*n/2*100+"%",s.width="100%";this.style=s},redraw(){let e=this.$refs.canvas;e.width=640,e.height=480;const t=e.getContext("2d");null!==t&&(t.save(),t.clearRect(0,0,e.width,e.height),(0,v.drawConnectors)(t,this.landmarks,h.FACEMESH_TESSELATION,{color:"lightgreen",lineWidth:.2}),t.restore())}}}),g=()=>{(0,a.sj)((e=>({b8fc0df8:e.transform})))},p=f.setup;f.setup=p?(e,t)=>(g(),p(e,t)):g;var k=f,w=s(89);const y=(0,w.Z)(k,[["render",d],["__scopeId","data-v-ef27425c"]]);var R=y;const b={class:"container"},S={class:"countdown"},_={class:"text"};function D(e,t,s,a,i,l){return(0,n.wg)(),(0,n.iD)("div",b,[(0,n._)("p",S,(0,c.zw)(e.number),1),(0,n._)("p",_,(0,c.zw)(e.text),1)])}var I=(0,n.aZ)({setup(){},props:{healtResult:{type:Object}},computed:{number(){return this.healtResult?this.healtResult.remainingTime.toFixed(0):-1},text(){let e="";switch(this.healtResult?.stage){case r.US.CollectingData:e="Scanning...";break;case r.US.AnalyzingData:e="Analyzing...";break;case r.US.WaitingData:e="Loading...";break}return e}}});const j=(0,w.Z)(I,[["render",D],["__scopeId","data-v-3faf1078"]]);var x=j;const C=e=>((0,n.dD)("data-v-3fd465d6"),e=e(),(0,n.Cn)(),e),O={key:0,class:"container"},T=C((()=>(0,n._)("div",{class:"section"},"Scanning Conditions",-1))),W={class:"condition"},q={class:"condition"},P={class:"condition"},A={class:"condition"},V={class:"condition"},B={class:"condition"};function H(e,t,s,a,i,l){const o=(0,n.up)("condition-icon");return s.conditions?((0,n.wg)(),(0,n.iD)("div",O,[T,(0,n._)("p",W,[(0,n.Wm)(o,{class:"icon",fulfilled:s.conditions.lighting},null,8,["fulfilled"]),(0,n.Uk)(" Lighting ")]),(0,n._)("p",q,[(0,n.Wm)(o,{class:"icon",fulfilled:s.conditions.distance},null,8,["fulfilled"]),(0,n.Uk)(" Distance ")]),(0,n._)("p",P,[(0,n.Wm)(o,{class:"icon",fulfilled:s.conditions.centered},null,8,["fulfilled"]),(0,n.Uk)(" Centered ")]),(0,n._)("p",A,[(0,n.Wm)(o,{class:"icon",fulfilled:s.conditions.movement},null,8,["fulfilled"]),(0,n.Uk)(" Movement ")]),(0,n._)("p",V,[(0,n.Wm)(o,{class:"icon",fulfilled:s.conditions.frameRate},null,8,["fulfilled"]),(0,n.Uk)(" Frame Rate ")]),(0,n._)("p",B,[(0,n.Wm)(o,{class:"icon",fulfilled:s.conditions.serverReady},null,8,["fulfilled"]),(0,n.Uk)(" Server Ready ")])])):(0,n.kq)("",!0)}var Z=s.p+"img/checkmark.faaf8c01.svg",F=s.p+"img/crossmark.93784a98.svg";const M={key:0,src:Z},E={key:1,src:F};function N(e,t,s,a,i,l){return s.fulfilled?((0,n.wg)(),(0,n.iD)("img",M)):((0,n.wg)(),(0,n.iD)("img",E))}var z={name:"condtion-icon",props:{fulfilled:{type:Boolean,default:!1}},setup(){}};const U=(0,w.Z)(z,[["render",N],["__scopeId","data-v-3dcaf130"]]);var $=U,L={setup(){},props:{conditions:Object},components:{ConditionIcon:$}};const Q=(0,w.Z)(L,[["render",H],["__scopeId","data-v-3fd465d6"]]);var G=Q;const X=e=>((0,n.dD)("data-v-10377171"),e=e(),(0,n.Cn)(),e),K={key:0,class:"container"},Y=X((()=>(0,n._)("div",{class:"section"},"Vital Signs",-1))),J=X((()=>(0,n._)("div",{class:"section"},"Holistic Analysis",-1))),ee={key:12,class:"section"},te=X((()=>(0,n._)("div",{class:"section"},"Cardiovascular Risk",-1))),se={key:13,class:"section"},ae=X((()=>(0,n._)("div",{class:"sec"},"Covid",-1))),ne={key:14,class:"section"},ie=X((()=>(0,n._)("div",{class:"sec"},"Scan Parameters",-1)));function le(e,t,s,a,i,l){const o=(0,n.up)("vital-signs");return e.showResult?((0,n.wg)(),(0,n.iD)("div",K,[(0,n._)("div",{class:"close",onClick:t[0]||(t[0]=(...t)=>e.hideResult&&e.hideResult(...t))},"[x]"),Y,(0,n.Wm)(o,{name:"Heart Rate",value:e.vs?.heartRate},null,8,["value"]),(0,n.Wm)(o,{name:"SPO2",value:e.vs?.spo2},null,8,["value"]),(0,n.Wm)(o,{name:"IBI",value:e.vs?.ibi},null,8,["value"]),e.vs?.stress?((0,n.wg)(),(0,n.j4)(o,{key:0,name:"Stress",value:e.vs.stress},null,8,["value"])):(0,n.kq)("",!0),e.vs?.respiratoryRate?((0,n.wg)(),(0,n.j4)(o,{key:1,name:"Respiratory Rate",value:e.vs.respiratoryRate},null,8,["value"])):(0,n.kq)("",!0),e.vs?.hrvRmssd?((0,n.wg)(),(0,n.j4)(o,{key:2,name:"HRV RMSSD",value:e.vs.hrvRmssd},null,8,["value"])):(0,n.kq)("",!0),e.vs?.hrvSdnn?((0,n.wg)(),(0,n.j4)(o,{key:3,name:"HRV SDNN",value:e.vs.hrvSdnn},null,8,["value"])):(0,n.kq)("",!0),e.vs?.temperature?((0,n.wg)(),(0,n.j4)(o,{key:4,name:"Temperature",value:e.vs.temperature},null,8,["value"])):(0,n.kq)("",!0),e.vs?.bloodPressure?((0,n.wg)(),(0,n.j4)(o,{key:5,name:"BloodPressure",value:e.vs.bloodPressure},null,8,["value"])):(0,n.kq)("",!0),e.vs?.bloodPressureSystolic?((0,n.wg)(),(0,n.j4)(o,{key:6,name:"Blood Pressure Systolic",value:e.vs.bloodPressureSystolic},null,8,["value"])):(0,n.kq)("",!0),e.vs?.bloodPressureDiastolic?((0,n.wg)(),(0,n.j4)(o,{key:7,name:"Blood Pressure Diastolic",value:e.vs.bloodPressureDiastolic},null,8,["value"])):(0,n.kq)("",!0),e.vs?.facialSkinAge?((0,n.wg)(),(0,n.j4)(o,{key:8,name:"Facial Skin Age",value:e.vs.facialSkinAge},null,8,["value"])):(0,n.kq)("",!0),e.vs?.bloodAlcohol?((0,n.wg)(),(0,n.j4)(o,{key:9,name:"Blood Alcohol",value:e.vs.bloodAlcohol},null,8,["value"])):(0,n.kq)("",!0),e.vs?.bloodSugar?((0,n.wg)(),(0,n.j4)(o,{key:10,name:"Blood Sugar",value:e.vs.bloodSugar},null,8,["value"])):(0,n.kq)("",!0),J,(0,n.Wm)(o,{name:"BMI",value:e.holistic?.bmi},null,8,["value"]),e.holistic?.generalWellness?((0,n.wg)(),(0,n.j4)(o,{key:11,name:"General Wellness",value:e.holistic.generalWellness},null,8,["value"])):(0,n.kq)("",!0),e.cardio?((0,n.wg)(),(0,n.iD)("div",ee,[te,(0,n.Wm)(o,{name:"General",value:e.cardio.generalRisk},null,8,["value"]),(0,n.Wm)(o,{name:"Congestive Heart Failure",value:e.cardio.congestiveHeartFailure},null,8,["value"]),(0,n.Wm)(o,{name:"Coronary Heart Disease",value:e.cardio.coronaryHeartDisease},null,8,["value"]),(0,n.Wm)(o,{name:"Intermittent Claudification",value:e.cardio.intermittentClaudication},null,8,["value"]),(0,n.Wm)(o,{name:"Stroke",value:e.cardio.stroke},null,8,["value"])])):(0,n.kq)("",!0),e.covid?((0,n.wg)(),(0,n.iD)("div",se,[ae,(0,n.Wm)(o,{name:"Risk",value:e.covid.covidRisk},null,8,["value"])])):(0,n.kq)("",!0),e.healthResult?.scanParameters?((0,n.wg)(),(0,n.iD)("div",ne,[ie,(0,n.Wm)(o,{name:"Signal Quality",value:e.healthResult.scanParameters.signalQuality},null,8,["value"])])):(0,n.kq)("",!0)])):(0,n.kq)("",!0)}const oe={class:"vitalSign"},re={class:"vitalSignName"},ce={class:"vitalSignValueView"},ue={class:"vitalSignValue"};function de(e,t,s,a,i,l){return(0,n.wg)(),(0,n.iD)("div",oe,[(0,n._)("div",re,(0,c.zw)(s.name),1),(0,n._)("div",ce,[(0,n._)("div",ue,(0,c.zw)(s.value),1)])])}var ve={setup(){},props:{name:String,value:[Number,String]}};const he=(0,w.Z)(ve,[["render",de],["__scopeId","data-v-a3fb7d3e"]]);var me=he,fe=(0,n.aZ)({setup(){},emits:["hideResult"],props:{healthResult:Object,showResult:Boolean},components:{VitalSigns:me},computed:{vs(){return this.healthResult?.vitalSigns},holistic(){return this.healthResult?.holisticHealth},cardio(){return this.healthResult?.risks?.cardiovascularRisks},covid(){return this.healthResult?.risks?.covidRisk}},methods:{hideResult(){this.$emit("hideResult")}}});const ge=(0,w.Z)(fe,[["render",le],["__scopeId","data-v-10377171"]]);var pe=ge,ke=(0,n.aZ)({setup(){},data(){return{isActive:!1,healthResult:void 0,frameSize:void 0,facebox:void 0,conditions:void 0,userInfo:{age:30,gender:r.Y0.Male,userId:"07a51b41-e1a4-4570-94a7-04ef371cc4f3"},showResult:!1,disabled:!1,config:{serverId:r.ag.AwsProdEnterprise,apiKey:"3m46C76Tka5wfpsxhZZQk1nhE49I9smM5zTag7PN"},landmarks:void 0,cameraIndex:0,devices:[{text:"",id:"",deviceIndex:0}],checkDevice:void 0,faceDetectorType:r["in"].OpenCV}},components:{VitalSignCamera:r.eA,Status:x,ConditionChecklist:G,HealthResult:pe,FaceMeshView:R},methods:{startScanning(){const e=this.$refs.vscam;e.startScanning(),this.showResult=!0},onVideoFrameProcessed(e){const{videoFrameInfo:t,facebox:s,healthResult:a,scanConditions:n,landmarks:i}=e;this.conditions=n,this.healthResult=a,this.facebox=s,this.frameSize=t,this.landmarks=i,this.disabled=!!this.conditions&&Object.values(this.conditions).every((e=>e))},hideResult(){this.showResult=!1},switchCamera(){this.cameraIndex=(this.cameraIndex+1)%this.devices.length}},async mounted(){this.isActive=!0,this.checkDevice=setInterval((async()=>{let e=await navigator.mediaDevices.enumerateDevices();e=e.filter((e=>"videoinput"===e.kind)),this.devices=e.map(((e,t)=>({text:e.label,id:e.deviceId,deviceIndex:t}))),this.cameraIndex=0}),1e3)},watch:{devices(){""!==this.devices[0].text&&(clearInterval(this.checkDevice),this.checkDevice=void 0)}}});const we=(0,w.Z)(ke,[["render",o],["__scopeId","data-v-092436c7"]]);var ye=we;(0,a.ri)(ye).mount("#app")}},t={};function s(a){var n=t[a];if(void 0!==n)return n.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,s),i.exports}s.m=e,function(){var e=[];s.O=function(t,a,n,i){if(!a){var l=1/0;for(u=0;u<e.length;u++){a=e[u][0],n=e[u][1],i=e[u][2];for(var o=!0,r=0;r<a.length;r++)(!1&i||l>=i)&&Object.keys(s.O).every((function(e){return s.O[e](a[r])}))?a.splice(r--,1):(o=!1,i<l&&(l=i));if(o){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[a,n,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="/vue-live-demo/"}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,i,l=a[0],o=a[1],r=a[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(r)var u=r(s)}for(t&&t(a);c<l.length;c++)i=l[c],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(u)},a=self["webpackChunkvue_vital_sign_app"]=self["webpackChunkvue_vital_sign_app"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(653)}));a=s.O(a)})();
//# sourceMappingURL=app.0a5abad6.js.map
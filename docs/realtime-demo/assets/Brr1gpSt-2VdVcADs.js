import{n as d,h as l,a as h,g as u,u as f}from"./index-C3a3rMoG.js";var p=Object.defineProperty,w=(s,e,t)=>e in s?p(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,c=(s,e,t)=>w(s,typeof e!="symbol"?e+"":e,t);async function v(s,e){const{FaceMesh:t}=await h(),a=new t({locateFile:i=>{switch(e){case d.CDN:return`https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${i}`;case d.SelfHosted:const{protocol:r,host:o}=window.location,n=`models/mediapipe/${i}`,m=u.loadModelsFromRoot?`${r}//${o}/`:document.baseURI;return new URL(n,m).href}}});return a.onResults(i=>{const r=i.image;if(i.multiFaceLandmarks===void 0)return s({faceBox:void 0,landmarks:[],videoFrame:r});const o=i.multiFaceLandmarks[0];if(!o||o.length===0)return s({faceBox:void 0,landmarks:[],videoFrame:r});let n=f(o);s({faceBox:n,landmarks:o,videoFrame:r})}),a}class F{constructor(){c(this,"faceMesh"),c(this,"promise"),c(this,"modelLocation",d.CDN)}async loadModels(e){this.faceMesh=await v(a=>{this.promise!==void 0&&(this.promise(a),this.promise=void 0)},e||this.modelLocation),await new Promise(a=>setTimeout(a,1e3));const t=await l();await this.faceMesh.send({image:t}),await new Promise(a=>setTimeout(a,2e3)),console.log("MediaPipe models loaded")}detect(e){return new Promise((t,a)=>{if(this.faceMesh===void 0){a(new Error("MediaPipe face mesh detector not ready"));return}this.promise=t,this.faceMesh.send(e).catch(a)})}}export{F as MediaPipeFaceDetector};

(function(){"use strict";function w(o){const{image:t,facebox:e}=o;let a=e.width*t.width,n=e.height*t.height,f=(e.xCenter-e.width/2)*t.width,u=(e.yCenter-e.height/2)*t.height;n=n*.7;const c=new OffscreenCanvas(t.width,t.height),i=c.getContext("2d");i==null||i.putImageData(t,0,0);const g=new OffscreenCanvas(a,n),r=g.getContext("2d");r.drawImage(c,f,u,a,n,0,0,a,n);let h=r.getImageData(0,0,g.width,g.height).data,d=0,l=0;for(let s=0;s<h.length;s+=4)d+=Math.max(h[s],h[s+1],h[s+2]),l++;return d/l}self.onmessage=o=>{const{inputData:t,hash:e}=o.data,a=w(t);self.postMessage({result:a,hash:e})}})();

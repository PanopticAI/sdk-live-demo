(function(){"use strict";function u(n,t){if(t.length===0)return{x:0,y:0,w:0,h:0};if(t.length===1){const e=t[0];return{x:Math.floor(e.x)*n.width,y:Math.floor(e.y)*n.height,w:1,h:1}}let h=t[0].x,c=t[0].y,r=t[0].x,s=t[0].y;for(let e=1;e<t.length;e++){const a=t[e];a.x<h&&(h=a.x),a.y<c&&(c=a.y),a.x>r&&(r=a.x),a.y>s&&(s=a.y)}return{x:h*n.width,y:c*n.height,w:(r-h)*n.width,h:(s-c)*n.height}}function w(n){var o;const{videoFrame:t,normalizedPoints:h}=n,{x:c,y:r,w:s,h:e}=u(t,h),a=new OffscreenCanvas(t.width,t.height);(o=a.getContext("2d"))==null||o.putImageData(t,0,0);let l=new OffscreenCanvas(s,e).getContext("2d");l.beginPath();for(let f=0;f<h.length;f++){const g=h[f],i=(g.x-c/t.width)*(t.width/s)*s,x=(g.y-r/t.height)*(t.height/e)*e;f===0?l.moveTo(i,x):l.lineTo(i,x)}return l.closePath(),l.clip(),l.drawImage(a,c,r,s,e,0,0,s,e),l.getImageData(0,0,s,e)}self.onmessage=n=>{const{inputData:t,hash:h}=n.data,c=w(t);self.postMessage({result:c,hash:h},[c.data.buffer])}})();

(function(){"use strict";(function(){function l(i){const{image:t,facebox:e}=i;let a=e.width*t.width,n=e.height*t.height,u=(e.xCenter-e.width/2)*t.width,w=(e.yCenter-e.height/2)*t.height;n=n*.7;const o=new OffscreenCanvas(t.width,t.height),c=o.getContext("2d");c==null||c.putImageData(t,0,0);const g=new OffscreenCanvas(a,n),d=g.getContext("2d");d.drawImage(o,u,w,a,n,0,0,a,n);let s=d.getImageData(0,0,g.width,g.height).data,f=0,r=0;for(let h=0;h<s.length;h+=4)f+=Math.max(s[h],s[h+1],s[h+2]),r++;return f/r}self.onmessage=i=>{const{inputData:t,hash:e}=i.data,a=l(t);self.postMessage({result:a,hash:e})}})()})();

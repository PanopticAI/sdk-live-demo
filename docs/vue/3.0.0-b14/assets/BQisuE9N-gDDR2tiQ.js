(function(){"use strict";(function(){function k(s,t){if(s===void 0)return;const{data:n,width:o,height:f}=s,c=[],v=[];for(let r=0;r<t;r++)for(let e=0;e<t;e++){const l=Math.floor(e*o/t),i=Math.min(Math.floor((e+1)*o/t),o),d=Math.floor(r*f/t),p=Math.min(Math.floor((r+1)*f/t),f);v.push({startX:l,endX:i,startY:d,endY:p})}for(const r of v){const{startX:e,endX:l,startY:i,endY:d}=r,p=l-e,y=d-i,M=p*y;if(M===0){const a=(i*o+e)*4,h=n[a],u=n[a+1],g=n[a+2],[m,Y,X]=D(h,u,g);c.push([m,Y,X]);continue}let w=0,z=0,b=0;for(let a=i;a<d;a++)for(let h=e;h<l;h++){const u=(a*o+h)*4,g=n[u],m=n[u+1],Y=n[u+2],[X,U,V]=D(g,m,Y);w+=X,z+=U,b+=V}const I=w/M,N=z/M,T=b/M;c.push([I,N,T])}return c}function D(s,t,n){const o=.299*s+.587*t+.114*n,f=-.14713*s-.28886*t+.436*n,c=.615*s-.51499*t-.10001*n;return[o,f,c]}function x(s){const{imageData:t,size:n}=s;return k(t,n)}self.onmessage=s=>{const{inputData:t,hash:n}=s.data,o=x(t);self.postMessage({result:o,hash:n})}})()})();
